<!DOCTYPE html><html><head>
            <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
            <meta content="utf-8" http-equiv="encoding">
          <title>Markdown Example!
</title><script type="text/x-mathjax-config">
            MathJax.Hub.Config({
                // extensions: ["tex2jax.js"],
                // jax: ["input/TeX","output/HTML-CSS"],
                tex2jax: {
                    displayMath: [ ['$$','$$'] ],
                    inlineMath: [ ["$","$"] ],
                    processEscapes: true,
                    processRefs: false,
                    processEnvironments: false,
                    processClass: "mathjax",
                    ignoreClass: "no-mathjax"
                }
            });
        </script><script type="text/javascript" src=".datadir_864d809680ad532ccd5c24eedf26b143/MathJax.js"></script><link href=".datadir_cddfd96a663906d3b58d6aa813d38332/katex.min.css" rel="stylesheet"><link href="scriptinject_sample.css" rel="stylesheet"><script src="scriptinject_sample.js"></script><meta name="viewport" content="width=device-width,initial-scale=1"><link href=".temp_githib_css/github-markdown.css" rel="stylesheet"><link href=".temp_highlightjs_css/default.css" rel="stylesheet"></head>
          <body class="no-mathjax markdown-body"><a name="H_Table%20of%20Contents"></a><h1>Table of Contents</h1>
<p>Use the following to generate a table of contents...
<code>```{toc} ```</code></p>
<p>Output:</p>
<div class="toc">
<ul>
<li><a href="#H_Table%20of%20Contents">Table of Contents</a></li>
<li><a href="#H_Page%20Title">Page Title</a></li>
<li><a href="#H_Bookmarks">Bookmarks</a></li>
<ul>
<li><a href="#H_Tie-breaking">Tie-breaking</a></li>
<li><a href="#H_Skipping">Skipping</a></li>
<li><a href="#H_Ignoring">Ignoring</a></li>
<li><a href="#H_Erroring">Erroring</a></li>
<li><a href="#H_Redirecting%20(all%20instances)">Redirecting (all instances)</a></li>
<li><a href="#H_Redirecting%20(single%20instance)">Redirecting (single instance)</a></li>
<li><a href="#H_Disabling">Disabling</a></li>
<li><a href="#H_Disabling%20All">Disabling All</a></li>
</ul>
<li><a href="#H_Math%20Typesetting">Math Typesetting</a></li>
<ul>
<li><a href="#H_MathJax">MathJax</a></li>
<li><a href="#H_KaTeX">KaTeX</a></li>
</ul>
<li><a href="#H_Image%20Annotations">Image Annotations</a></li>
<li><a href="#H_File%20Output">File Output</a></li>
<li><a href="#H_CSV%20Table">CSV Table</a></li>
<li><a href="#H_Macro">Macro</a></li>
<ul>
<li><a href="#H_Macro%20Example%3A%20Note">Macro Example: Note</a></li>
<li><a href="#H_Macro%20Example%3A%20GraphViz">Macro Example: GraphViz</a></li>
<li><a href="#H_Macro%20Example%3A%20PlantUML">Macro Example: PlantUML</a></li>
<li><a href="#H_Macro%20Example%3A%20Svgbob">Macro Example: Svgbob</a></li>
<li><a href="#H_Macro%20Example%3A%20LaTeX%20Chemfig">Macro Example: LaTeX Chemfig</a></li>
<li><a href="#H_Macro%20Example%3A%20Script%20Injection%20(CSS%2FJS)">Macro Example: Script Injection (CSS/JS)</a></li>
</ul>
<li><a href="#H_Standard%20Markdown">Standard Markdown</a></li>
<ul>
<li><a href="#H_Headers">Headers</a></li>
<li><a href="#H_Text%20Formatting">Text Formatting</a></li>
<li><a href="#H_Image">Image</a></li>
<li><a href="#H_Lists">Lists</a></li>
<li><a href="#H_Table">Table</a></li>
<li><a href="#H_Code">Code</a></li>
</ul>
</ul>
</div>
<a name="H_Page%20Title"></a><h1>Page Title</h1>
<p>Set the title of the output document using the title inline/block tag:</p>
<pre><code>```{title}
Markdown Example!
```
</code></pre>
<p>Output: (see the title of this HTML page)</p>
<p>If you're using a block tag, make sure you put the title on a NEW line (not on the same line that declares the tag).</p>
<a name="H_Bookmarks"></a><h1>Bookmarks</h1>
<p>Bookmarks allow you to automatically create links in your markdown document using regex. That is, if a piece of text matches some regex pattern, it'll automatically link back to the point where that regex was declared.</p>
<p>If all you care about is quickly bookmarking a piece of text, the simplest usage of this tag is <code>`{bm} &lt;LABEL&gt;`</code>. For example, <code>`{bm} coke zero`</code>: <a name="BM_(coke%20zero)%2Fi"></a><strong>coke zero</strong> will be the reference for <a href="#BM_(coke%20zero)%2Fi">coke zero</a>, <a href="#BM_(coke%20zero)%2Fi">cOkE zErO</a>, and <a href="#BM_(coke%20zero)%2Fi">coke zero</a>s (it's case-insensitive).</p>
<p>If you care about more elaborate use-cases, the details below provide advance usage instructions.</p>
<p>To create a bookmark, use the <a name="BM_(bm)%2Fi"></a><strong>bm</strong> tag: <code>`{bm} &lt;LABEL&gt;/&lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;/&lt;SHOW_PRE&gt;/&lt;SHOW_POST&gt;`</code>. This tag takes in 5 arguments...</p>
<ol>
<li>
<p><code>&lt;LABEL&gt;</code>: Text to output where the bookmark is <em>declared</em>.</p>
<p>That is, the place where you define this tag is the place that this label gets output (in bold).</p>
</li>
<li>
<p><code>&lt;REGEX&gt;</code>: Regex used to match text in the document (<em>requires exactly 1 capture group</em>).</p>
<p>When text is matched, the text that gets captured by capture group 1 is the text that gets output and linkified. The portion matched before/after capture group 1 will be used for matching but won't be linkified, and depending on <code>SHOW_PRE</code>/<code>SHOW_POST</code> may or may not be output.</p>
</li>
<li>
<p><code>&lt;REGEX_FLAGS&gt;</code>: Regex flags to use for <code>&lt;REGEX&gt;</code>.</p>
<p>Currently only the i flag is supported (i = ignore case).</p>
</li>
<li>
<p><code>&lt;SHOW_PRE&gt;</code>: true/false indicating if text before <code>&lt;REGEX&gt;</code>'s capture group 1 should be output.</p>
</li>
<li>
<p><code>&lt;SHOW_POST&gt;</code>: true/false indicating if text after <code>&lt;REGEX&gt;</code>'s capture group 1 should be output.</p>
</li>
</ol>
<p>There are 2 short-hand forms for bookmarks:</p>
<ul>
<li>
<p><code>`{bm} &lt;LABEL&gt;`</code> ⟶ <code>`{bm} &lt;LABEL&gt;/(&lt;LABEL&gt;)/i/false/false`</code></p>
<p>This form is good for quickly bookmarking a piece of a text. It's intended for the most common cases: where you don't care about case sensitivity and you're just doing basic text search (no fancy regex constructs). It's using <code>&lt;LABEL&gt;</code> as both the label and the regex, where in the regex it's being wrapped in parenthesis such that the entire thing is capture group 1. It also defaults <code>&lt;SHOW_PRE&gt;</code> and <code>&lt;SHOW_POST&gt;</code> to false.</p>
</li>
<li>
<p><code>`{bm} &lt;LABEL&gt;/&lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;`</code> ⟶ <code>`{bm} &lt;LABEL&gt;/&lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;/false/false`</code></p>
<p>This form essentially just defaults <code>&lt;SHOW_PRE&gt;</code> and <code>&lt;SHOW_POST&gt;</code> to false.</p>
</li>
</ul>
<p>Example usage / output:</p>
<ul>
<li><code>`{bm} &lt;LABEL&gt;`</code>
<ul>
<li><code>`{bm} diet coke`</code>: <a name="BM_(diet%20coke)%2Fi"></a><strong>diet coke</strong> will be the reference for <a href="#BM_(diet%20coke)%2Fi">diet coke</a>, <a href="#BM_(diet%20coke)%2Fi">dIeT cOKE</a>, and <a href="#BM_(diet%20coke)%2Fi">diet coke</a>s.</li>
</ul>
</li>
<li><code>`{bm} &lt;LABEL&gt;/&lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;`</code>
<ul>
<li><code>`{bm} this text/\b(dog)s?\b/i`</code>: <a name="BM_%5Cb(dog)s%3F%5Cb%2Fi"></a><strong>this text</strong> will be the reference for <a href="#BM_%5Cb(dog)s%3F%5Cb%2Fi">DOG</a> and <a href="#BM_%5Cb(dog)s%3F%5Cb%2Fi">dog</a> but not doggy, doggo, or ddog.</li>
<li><code>`{bm} this text/(carp\w+s?)/`</code>: <a name="BM_(carp%5Cw%2Bs%3F)%2F"></a><strong>this text</strong> will be the reference for <a href="#BM_(carp%5Cw%2Bs%3F)%2F">carps</a>, <a href="#BM_(carp%5Cw%2Bs%3F)%2F">carpenter</a>, and <a href="#BM_(carp%5Cw%2Bs%3F)%2F">carpenters</a>, but not carp.</li>
<li><code>`{bm} this text/hello\s+(world)/i`</code>: <a name="BM_hello%5Cs%2B(world)%2Fi"></a><strong>this text</strong> will be the reference for <a href="#BM_hello%5Cs%2B(world)%2Fi">world</a>. Even though the word hello was specified and matched on, it won't be included in the output because it isn't captured by <code>&lt;REGEX&gt;</code>'s capture group 1.</li>
</ul>
</li>
<li><code>`{bm} &lt;LABEL&gt;/&lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;/&lt;SHOW_PRE&gt;/&lt;SHOW_POST&gt;`</code>
<ul>
<li><code>`{bm} grams/\d+(grams|gram|g)\b/i/true/false`</code>: <a name="BM_%5Cb%5Cd%2B(grams%7Cgram%7Cg)%5Cb%2Fi"></a><strong>grams</strong> will be the reference for a g, gram, or grams anytime it's following numbers: 12345<a href="#BM_%5Cb%5Cd%2B(grams%7Cgram%7Cg)%5Cb%2Fi">g</a>.</li>
</ul>
</li>
</ul>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>Forward-slashes (<code>/</code>) are used to delimit arguments. If required, use back-slash to escape the delimiter (e.g. <code>\/</code>).</p>
</div>
<p>The sections below provide details on nuances of bookmarking (e.g. tie-breaking) as well as ancillary tags that help with bookmarking in large documents.</p>
<a name="H_Tie-breaking"></a><h2>Tie-breaking</h2>
<p>In certain cases, multiple bookmarks may match a certain piece of text. To resolve this, the bookmark with the longest piece of text captured by capture group 1 is the one chosen. For example, if the bookmarks <code>`{bm} label1/Samsung (Galaxy)/i/true/true`</code> and <code>`{bm} label2/Samsung (Galaxy Smartphone)/i/true/true`</code> matched on the text <strong><a href="#BM_Samsung%20(Galaxy%20Smartphone)%2Fi">Galaxy Smartphone</a> Holder</strong>, the second bookmark would get chosen because capture group 1 returns a longer piece of text:</p>
<ul>
<li><a name="BM_Samsung%20(Galaxy)%2Fi"></a><strong>label1</strong></li>
<li><a name="BM_Samsung%20(Galaxy%20Smartphone)%2Fi"></a><strong>label2</strong></li>
</ul>
<p>The text <a href="#BM_Samsung%20(Galaxy%20Smartphone)%2Fi">Galaxy Smartphone</a> Holder should link to label2 instead of label1.</p>
<p>If the length between capture group 1s is the same, the longest piece of text overall is the one that's chosen. For example, if the bookmarks <code>`{bm} label3/Google (Pixel)/i/true/true`</code> and <code>`{bm} label4/Google (Pixel) 4a/i/true/true`</code> matched on the text <strong>Google <a href="#BM_Google%20(Pixel)%204a%2Fi">Pixel</a> 4a Holder</strong>, the second bookmark would get chosen because both capture group 1s have the same length but the overall captured text from the second bookmark is larger:</p>
<ul>
<li><a name="BM_Google%20(Pixel)%2Fi"></a><strong>label3</strong></li>
<li><a name="BM_Google%20(Pixel)%204a%2Fi"></a><strong>label4</strong></li>
</ul>
<p>If the length of the overall text between the matches is the same, an error is thrown and you'll need to find a way to disambiguate. The typical way to disambiguate is to have the regex check for a suffix that doesn't get output when rendered.</p>
<p>Example usage / output:</p>
<pre><code>* `{bm} base/(base)_pH/i`
* `{bm} base/(base)_DNA/i`

The word base_pH should link to the first bullet, while base_DNA should link to the second bullet.
</code></pre>
<ul>
<li><a name="BM_(base)_pH%2Fi"></a><strong>base</strong></li>
<li><a name="BM_(base)_DNA%2Fi"></a><strong>base</strong></li>
</ul>
<p>The word <a href="#BM_(base)_pH%2Fi">base</a> should link to the first bullet, while <a href="#BM_(base)_DNA%2Fi">base</a> should link to the second bullet.</p>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>See <a href="#BM_(bm-error)%2Fi">bm-error</a> for related disambiguation details.</p>
</div>
<a name="H_Skipping"></a><h2>Skipping</h2>
<p>Using the <a name="BM_(bm-skip)%2Fi"></a><strong>bm-skip</strong> tag, you can render any text without bookmark handling. That is, if the text matches a <a href="#BM_(bm)%2Fi">bm</a> / <a href="#BM_(bm-error)%2Fi">bm-error</a> / <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> tag, it won't matter.</p>
<p>Why is this useful? The <a href="#BM_(bm-skip)%2Fi">bm-skip</a> tag is typically used when some word matches a bookmark but that word is being used in a different context. For example, if I bookmarked Apple as a reference to the company that makes iPhones, I wouldn't want it to link text that was referring to apple as a fruit.</p>
<p>Example usage / output:</p>
<pre><code>A mechanical `{bm} crane` is very big.
* The crane is lifting a truck (should be linked back)
* The `{bm-skip} crane` is flying away (should NOT be linked back -- referring to bird).
</code></pre>
<p>A mechanical <a name="BM_(crane)%2Fi"></a><strong>crane</strong> is very big.</p>
<ul>
<li>The <a href="#BM_(crane)%2Fi">crane</a> is lifting a truck (should be linked back)</li>
<li>The crane is flying away (should NOT be linked back -- referring to bird).</li>
</ul>
<a name="H_Ignoring"></a><h2>Ignoring</h2>
<p>Using the <a name="BM_(bm-ignore)%2Fi"></a><strong>bm-ignore</strong> tag, you can match a piece of text using regex and explicitly leave that text unlinked. That is, where the <a href="#BM_(bm)%2Fi">bm</a> tag linkifies any text that it matches, the <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> tag leaves any text it matches unlinked.</p>
<p>Why's this useful? Imagine the following use-case: you've created a bookmark on the word product, but as a result you're also getting links back from words that contain the word product (links you don't want). For example, the word product gets linked back, but so does production, productive, byproduct.</p>
<p>Rather than explicitly seeking out each instance of these unwanted links and wrapping them in a <a href="#BM_(bm-skip)%2Fi">bm-skip</a> tag, you can use the <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> tag. For example:</p>
<pre><code>`{bm} product`
`{bm-ignore} production`
`{bm-ignore} productive`
`{bm-ignore} byproduct`
...
</code></pre>
<p>If the word production, productive, or byproduct are matched, they'll be left unlinked.</p>
<p>The <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> tag's parameters are similar to the <a href="#BM_(bm)%2Fi">bm</a> tag's parameters, except that there is no label: <code>`{bm-ignore} &lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;/&lt;SHOW_PRE&gt;/&lt;SHOW_POST&gt;`</code>.</p>
<p>Similarly, there are 2 short-hand forms:</p>
<ul>
<li><code>`{bm-ignore} &lt;REGEX&gt;`</code> ⟶ <code>`{bm} (&lt;REGEX&gt;)/i/false/false`</code> (note that the regex is being wrapped in parenthesis)</li>
<li><code>`{bm-ignore} &lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;`</code> ⟶ <code>`{bm} &lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;/false/false`</code></li>
</ul>
<p>Example usage / output:</p>
<ul>
<li>
<p><code>`{bm-ignore} &lt;REGEX&gt;`</code></p>
<pre><code>`{bm-ignore} recessive allele`
Bookmark `{bm} recessive` and `{bm} allele`, but ignore both of them together.
 * The term recessive should be linked back.
 * The term allele should be linked back.
 * The term recessive allele should NOT be linked back.
</code></pre>
<p>
Bookmark <a name="BM_(recessive)%2Fi"></a><strong>recessive</strong> and <a name="BM_(allele)%2Fi"></a><strong>allele</strong>, but ignore both of them together.</p>
<ul>
<li>The term <a href="#BM_(recessive)%2Fi">recessive</a> should be linked back.</li>
<li>The term <a href="#BM_(allele)%2Fi">allele</a> should be linked back.</li>
<li>The term recessive allele should NOT be linked back.</li>
</ul>
</li>
<li>
<p><code>`{bm-ignore} &lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;`</code></p>
<pre><code>`{bm-ignore} (basic)_norm/i`
Bookmark `{bm} basic/(basic)_pH/i` when suffix is _pH and `{bm} basic/(basic)_lang/i` when suffix is _lang, but ignore when suffix is _norm.
 * The term basic_pH should be linked back to the _pH suffix.
 * The term basic_lang should be linked back to the _lang suffix.
 * The term basic_norm should NOT be linked back.
</code></pre>
<p>
Bookmark <a name="BM_(basic)_pH%2Fi"></a><strong>basic</strong> when suffix is _pH and <a name="BM_(basic)_lang%2Fi"></a><strong>basic</strong> when suffix is _lang, but ignore when suffix is _norm.</p>
<ul>
<li>The term <a href="#BM_(basic)_pH%2Fi">basic</a> should be linked back to the _pH suffix.</li>
<li>The term <a href="#BM_(basic)_lang%2Fi">basic</a> should be linked back to the _lang suffix.</li>
<li>The term basic should NOT be linked back.</li>
</ul>
</li>
</ul>
<a name="H_Erroring"></a><h2>Erroring</h2>
<p>Using the <a name="BM_(bm-error)%2Fi"></a><strong>bm-error</strong> tag, you can match a piece of text using regex and explicitly generate an error when a match is found. That is, where the <a href="#BM_(bm)%2Fi">bm</a> tag linkifies any text that it matches, the <a href="#BM_(bm-error)%2Fi">bm-error</a> tag crashes the application when it matches a piece of text.</p>
<p>Why's this useful? Imagine the following use-case: you're writing a document on biology and chemistry. You have 2 sections in the document that the word base relates to: base as in the pH scale and base as in a nucleotide base. Since the word base is being used in 2 different contexts, you create bookmarks that explicitly look for a suffix:</p>
<pre><code>`{bm} base/(base)_pH/i`
`{bm} base/(base)_DNA/i`
</code></pre>
<p>As you continue writing your document, you never want the word base to be used by itself -- it should almost always refer to one of the 2 bookmarks. You can use the <a href="#BM_(bm-error)%2Fi">bm-error</a> tag to explicitly stop you from using the word base by itself:</p>
<pre><code>`{bm} base/(base)_pH/i`
`{bm} base/(base)_DNA/i`
`{bm-error} Use base_pH if referring to pH scale, base_DNA if referring to nucleotides, or base_NORM to leave as-is/(base)/i`
</code></pre>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>The <a href="#BM_(bm-skip)%2Fi">bm-skip</a> tag works on <a href="#BM_(bm-error)%2Fi">bm-error</a> as well. That is, if a piece of text wrapped in a <a href="#BM_(bm-skip)%2Fi">bm-skip</a> tag that matches <a href="#BM_(bm-error)%2Fi">bm-error</a> won't result in an error.</p>
</div>
<p>The <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> tag's parameters are similar to the <a href="#BM_(bm)%2Fi">bm</a> tag's parameters, except that label is replaced by the error message: <code>`{bm-error} &lt;ERROR_MSG&gt;/&lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;/&lt;SHOW_PRE&gt;/&lt;SHOW_POST&gt;`</code>.</p>
<p>Similarly, there are 2 short-hand forms:</p>
<ul>
<li><code>`{bm-error} &lt;ERROR_MSG&gt;/&lt;REGEX&gt;`</code> ⟶ <code>`{bm} &lt;ERROR_MSG&gt;/(&lt;REGEX&gt;)/i/false/false`</code> (note that the regex is being wrapped in parenthesis)</li>
<li><code>`{bm-error} &lt;ERROR_MSG&gt;/&lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;`</code> ⟶ <code>`{bm} &lt;ERROR_MSG&gt;/&lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;/false/false`</code></li>
</ul>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>Since <a href="#BM_(bm-error)%2Fi">bm-error</a> tags don't render anything, what's the point of having <code>&lt;SHOW_PRE&gt;</code> and <code>&lt;SHOW_POST&gt;</code>? <a href="#BM_(bm-error)%2Fi">bm-error</a> tags can be redirected via <a href="#BM_(bm-redirect)%2Fi">bm-redirect</a>. That is, you can make temporarily make it so that rather than erroring out on a match, that matched text will instead link to another <a href="#BM_(bm-error)%2Fi">bm-error</a>.</p>
</div>
<p>Example usage / output:</p>
<pre><code>`` `{bm-error} Base is too ambiguous. Use either base_pH or base_nucleotide/\b(base)\b/i` ``
* The term base_pH should be linked back to the _pH suffix.
* The term base_nucleotide should be linked back to the _nucleotide suffix.
* The term base should cause the render process to error.
</code></pre>
<p>OUTPUT NOT POSSIBLE BECAUSE THROWN ERROR WOULD CANCEL RENDER.</p>
<a name="H_Redirecting%20(all%20instances)"></a><h2>Redirecting (all instances)</h2>
<p>A <a href="#BM_(bm)%2Fi">bm</a> / <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> / <a href="#BM_(bm-error)%2Fi">bm-error</a> tag can be redirected to another <a href="#BM_(bm)%2Fi">bm</a> / <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> / <a href="#BM_(bm-error)%2Fi">bm-error</a> tag using <a name="BM_(bm-redirect)%2Fi"></a><strong>bm-redirect</strong>, then reset back to normal using the <a name="BM_(bm-reset)%2Fi"></a><strong>bm-reset</strong> tag. That is, you can make it so that if the linker matches a piece of text, instead of performing the intended action, it'll perform the action for some other bookmark.</p>
<p>The <a href="#BM_(bm-redirect)%2Fi">bm-redirect</a> tag takes in 4 arguments: <code>`{bm-redirect} &lt;SRC_REGEX&gt;/&lt;SRC_REGEX_FLAGS&gt;/&lt;DST_REGEX&gt;/&lt;DST_REGEX_FLAGS&gt;`</code>...</p>
<ol>
<li>
<p><code>&lt;SRC_REGEX&gt;</code>: Regex used by tag being redirected from.</p>
</li>
<li>
<p><code>&lt;SRC_REGEX_FLAGS&gt;</code>: Regex flags used by tag being redirected from.</p>
</li>
<li>
<p><code>&lt;DST_REGEX&gt;</code>: Regex used by tag being redirected to.</p>
</li>
<li>
<p><code>&lt;DST_REGEX_FLAGS&gt;</code>: Regex flags used by tag being redirected to.</p>
</li>
</ol>
<p>The <a href="#BM_(bm-reset)%2Fi">bm-reset</a> tag takes 2 arguments: <code>`{bm-reset} &lt;SRC_REGEX&gt;/&lt;SRC_REGEX_FLAGS&gt;`</code>...</p>
<ol>
<li>
<p><code>&lt;SRC_REGEX&gt;</code>: Regex used by tag that's being redirected.</p>
</li>
<li>
<p><code>&lt;SRC_REGEX_FLAGS&gt;</code>: Regex flags used by tag that's being redirected.</p>
</li>
</ol>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>As you can probably infer, the key for bookmarking is regex + regex flags.</p>
</div>
<p>Why's this useful? Imagine the following use-case: you're writing a document on biology and chemistry. You have 2 sections in the document that the word base relates to: base as in the pH scale and base as in a nucleotide base. Since the word base is being used in 2 different contexts, you create bookmarks that explicitly look for a suffix:</p>
<pre><code>`{bm-ignore} base`
`{bm} base/(base)_pH/i`
`{bm} base/(base)_DNA/i`
</code></pre>
<p>As you continue writing your document, the word base used in...</p>
<ul>
<li>chemistry related text will very likely refer to the pH scale.</li>
<li>biology related text will very likely refer to nucleotides.</li>
</ul>
<p>Each section can redirect the word base to the appropriate bookmark, then reset it once that section is over.</p>
<p>Example usage / output:</p>
<pre><code>`{bm-ignore} product`

* `{bm} product/(product)_MATH/i` (math multiplication)
* `{bm} product/(product)_CHEM/i` (chemistry)

`{bm-redirect} (product)/i/(product)_CHEM/i`

Much of chemistry research is focused on the synthesis and characterization of beneficial products, as well as the detection and removal of undesirable products. Synthetic chemists can be subdivided into research chemists who design new chemicals and pioneer new methods for synthesizing chemicals, as well as process chemists who scale up chemical production and make it safer, more environmentally sustainable, and more efficient.[3] Other fields include natural product chemists who isolate products created by living organisms and then characterize and study these products.

`{bm-reset} (product)/i`

Every instance of product in paragraph above should be linked to the chemistry reference.
</code></pre>
<p></p>
<ul>
<li><a name="BM_(product)_MATH%2Fi"></a><strong>product</strong> (math multiplication)</li>
<li><a name="BM_(product)_CHEM%2Fi"></a><strong>product</strong> (chemistry)</li>
</ul>
<p></p>
<p>Much of chemistry research is focused on the synthesis and characterization of beneficial <a href="#BM_(product)_CHEM%2Fi">product</a>s, as well as the detection and removal of undesirable <a href="#BM_(product)_CHEM%2Fi">product</a>s. Synthetic chemists can be subdivided into research chemists who design new chemicals and pioneer new methods for synthesizing chemicals, as well as process chemists who scale up chemical <a href="#BM_(product)_CHEM%2Fi">product</a>ion and make it safer, more environmentally sustainable, and more efficient.[3] Other fields include natural <a href="#BM_(product)_CHEM%2Fi">product</a> chemists who isolate <a href="#BM_(product)_CHEM%2Fi">product</a>s created by living organisms and then characterize and study these <a href="#BM_(product)_CHEM%2Fi">product</a>s.</p>
<p></p>
<p>Every instance of product in paragraph above should be linked to the chemistry reference.</p>
<a name="H_Redirecting%20(single%20instance)"></a><h2>Redirecting (single instance)</h2>
<p>Any piece of text can be directed directed to a <a href="#BM_(bm)%2Fi">bm</a> tag it wasn't intended for using <a name="BM_(bm-target)%2Fi"></a><strong>bm-target</strong>. That is, you can make it so that a piece of text specifically links to some other bookmark that wouldn't normally link that piece of text.</p>
<p>The <a href="#BM_(bm-target)%2Fi">bm-target</a> tag takes in 3 arguments: <code>`{bm-target} &lt;OUTPUT&gt;/&lt;REGEX&gt;/&lt;REGEX_FLAGS&gt;`</code>...</p>
<ol>
<li>
<p><code>&lt;OUTPUT&gt;</code>: Text to output and linkify.</p>
</li>
<li>
<p><code>&lt;REGEX&gt;</code>: Regex used by the <a href="#BM_(bm)%2Fi">bm</a> tag being targeted.</p>
</li>
<li>
<p><code>&lt;REGEX_FLAGS&gt;</code>: Regex flags used by the <a href="#BM_(bm)%2Fi">bm</a> tag being targeted.</p>
</li>
</ol>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>This ONLY works for linking text to <a href="#BM_(bm)%2Fi">bm</a> tags, not <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a>/<a href="#BM_(bm-error)%2Fi">bm-error</a>. <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> explicitly doesn't link the regex it searches for and <a href="#BM_(bm-error)%2Fi">bm-error</a> throws an error if it sees the regex it's searching for.</p>
</div>
<p>Why's this useful? For the same reason as <a href="#BM_(bm-redirect)%2Fi">bm-redirect</a>. A single one-off piece of text can be easily redirected to a bookmark that it wasn't intended for.</p>
<p>Example usage / output:</p>
<pre><code>`{bm} junk bookmark`

* this should point to junk bookmark.
* this one should also point to `{bm-target} the bookmark above/(junk bookmark)/i`.
</code></pre>
<p><a name="BM_(junk%20bookmark)%2Fi"></a><strong>junk bookmark</strong></p>
<ul>
<li>this should point to <a href="#BM_(junk%20bookmark)%2Fi">junk bookmark</a>.</li>
<li>this one should also point to <a href="#BM_(junk bookmark)/i">the bookmark above</a>.</li>
</ul>
<a name="H_Disabling"></a><h2>Disabling</h2>
<p>A <a href="#BM_(bm)%2Fi">bm</a> / <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> / <a href="#BM_(bm-error)%2Fi">bm-error</a> tag can be temporarily disabled and then re-enabled using the <a href="#BM_(bm)%2Fi">bm</a>-disable and <a href="#BM_(bm)%2Fi">bm</a>-enable tags. Disabling a bookmark doesn't mean that other bookmarks can't redirect to it, it just means that the linker will ignore this bookmark when matching text.</p>
<p>Why's this useful? Imagine that you set a bookmark match to produce an error (<a href="#BM_(bm-error)%2Fi">bm-error</a>) but in certain cases you want to use that matched text without generating an error. Disabling allows for that.</p>
<p>Example usage / output:</p>
<pre><code>Bookmark `{bm} Sao Paulo`.
* Sao Paulo should be linked back.
* `{bm-disable} (Sao Paulo)/i` Sao Paulo should NOT be linked back `{bm-enable} (Sao Paulo)/i`.
</code></pre>
<p>Bookmark <a name="BM_(Sao%20Paulo)%2Fi"></a><strong>Sao Paulo</strong>.</p>
<ul>
<li><a href="#BM_(Sao%20Paulo)%2Fi">Sao Paulo</a> should be linked back.</li>
<li> Sao Paulo should NOT be linked back .</li>
</ul>
<a name="H_Disabling%20All"></a><h2>Disabling All</h2>
<p>The linker can be temporarily disabled and then re-enabled using the <a name="BM_(bm-disable-all)%2Fi"></a><strong>bm-disable-all</strong> and <a name="BM_(bm-enable-all)%2Fi"></a><strong>bm-enable-all</strong> tags. That is, disabling the linker turns off all text matching functionality: <a href="#BM_(bm)%2Fi">bm</a> / <a href="#BM_(bm-ignore)%2Fi">bm-ignore</a> / <a href="#BM_(bm-error)%2Fi">bm-error</a>.</p>
<p>Why's this useful? In certain cases you may have code / macro that's generating text. You may not know what that generated text is beforehand, meaning that the bookmark matches found in it may be unexpected / incorrect. Disabling all bookmark matches allows the text to be output as-is (no linkifying of the output).</p>
<p>Example usage / output:</p>
<pre><code>Bookmark `{bm} caffeine`.
* Caffeine should `{bm-disable-all}` be linked back.
* Caffeine should NOT be linked back.

`{bm-enable-all}`
</code></pre>
<p>Bookmark <a name="BM_(caffeine)%2Fi"></a><strong>caffeine</strong>.</p>
<ul>
<li><a href="#BM_(caffeine)%2Fi">Caffeine</a> should  be linked back.</li>
<li>Caffeine should NOT be linked back.</li>
</ul>
<p></p>
<a name="H_Math%20Typesetting"></a><h1>Math Typesetting</h1>
<p>You can typeset math expressions using different HTML type setting engines.</p>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>Right now, the preferred method of typesetting is to use KaTeX because it's more lightweight. MathJax 3 may change this (we're using an inline version of MathJax 2).</p>
</div>
<a name="H_MathJax"></a><h2>MathJax</h2>
<p>Add a MathJax TeX expression using mj inline/block tag:</p>
<pre><code>```{mj}
\frac{a}{b}
```
</code></pre>
<p>Inline output: <span class="mathjax">$\frac{a}{b}$</span></p>
<p>Block output:</p>
<div class="mathjax">$$\frac{a}{b}
$$</div><a name="H_KaTeX"></a><h2>KaTeX</h2>
<p>Add a KaTeX TeX expression using kt inline/block tag:</p>
<pre><code>```{kt}
\frac{a}{b}
```
</code></pre>
<p>Inline output: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>a</mi><mi>b</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{a}{b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>Block output:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mi>a</mi><mi>b</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{a}{b}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.7935600000000003em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><a name="H_Image%20Annotations"></a><h1>Image Annotations</h1>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p>You can include local images and annotate / scale / crop them using the img block tag:</p>
<pre><code>```{img}
201903_Ribosome.svg
Diagram of ribosome translating messanger RNA
By DataBase Center for Life Science (DBCLS) - http://togotv.dbcls.jp/ja/togopic.2019.06.html, CC BY 4.0, https://commons.wikimedia.org/w/index.php?curid=77793595

scale 0.45 0.45

fg_color #000000ff
bg_color #ffff00ff
text 0.1 0.1 mRNA strand

fg_color #ffff00ff
bg_color #00000000
arrow 0.1 0.1  0.1 0.55  0.25 0.55
poly 0.15 0.4  0.6 0.75  0.75 0.75  0.20 0.25
```
</code></pre>
<p>Output:</p>
<p><img src=".datafile_17141ec97f6e72118b11bb01cda33611/data.svg" alt="Diagram of ribosome translating messanger RNA" title="By DataBase Center for Life Science (DBCLS) - http://togotv.dbcls.jp/ja/togopic.2019.06.html, CC BY 4.0, https://commons.wikimedia.org/w/index.php?curid=77793595"></p><p>The first 3 lines must be as follows:</p>
<ol>
<li>file name (should sit in the same directory as input.md).</li>
<li>alternative text for the image (e.g. description of the image).</li>
<li>title text for the image (e.g. attribution).</li>
</ol>
<p>Subsequent lines are commands that you can use to manipulate and annotate the image...</p>
<ul>
<li><em>scale x_scale y_scale</em> -- scale the image by some percentage (unit is percentage).</li>
<li><em>expand new_width new_height x_offset y_offset</em> -- expand the image canvas to some new dimension without resizing the contents (unit is percentage).</li>
<li><em>crop x_offset y_offset new_width new_height</em> -- crop the image to some new dimension (unit is percentage).</li>
<li><em>bg_color html_color_code</em> -- changes the background color.</li>
<li><em>fg_color html_color_code</em> -- changes the foreground color.</li>
<li><em>stroke width</em> -- changes the stroke width (unit is pixels).</li>
<li><em>font_size size</em> -- changes the font size (unit is pixels).</li>
<li><em>rect x_offset y_offset width height</em> -- highlight a rectangle on the image (unit is percentage).</li>
<li><em>poly x1 y1 x2 y2 x3 y3 ...</em> -- highlight a polygon on the image (unit is percentage).</li>
<li><em>arrow x1 y1 x2 y2 ...</em> -- draw an arrow on the image (unit is percentage).</li>
<li><em>text x_offset y_offset string</em> -- write a string on the image (unit is percentage).</li>
</ul>
<a name="H_File%20Output"></a><h1>File Output</h1>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p>Output text files using the output block tag:</p>
<pre><code>```{output}
InternalUtils.java
java
\n([ ]+static boolean isBalanced[\s\S]*?)\s+static boolean isCharged
```
</code></pre>
<p>Output:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isBalanced</span><span class="hljs-params">(ChemicalEquation ce)</span> </span>{
    Multiset&lt;Element&gt; reactantElementBag = HashMultiset.create();
    ce.reactants.items.stream()
            .flatMap(i -&gt; nCopies(i.count, i.bond.items).stream())
            .flatMap(i -&gt; i.stream())
            .forEach(bu -&gt; reactantElementBag.add(bu.element, bu.count));
    
    Multiset&lt;Element&gt; productElementBag = HashMultiset.create();
    ce.products.items.stream()
            .flatMap(i -&gt; nCopies(i.count, i.bond.items).stream())
            .flatMap(i -&gt; i.stream())
            .forEach(bu -&gt; productElementBag.add(bu.element, bu.count));
    
    <span class="hljs-keyword">return</span> reactantElementBag.equals(productElementBag);
}</code></pre><p>The output block takes in the following lines...</p>
<ul>
<li>1st line is the file path.</li>
<li>2nd line (optional) is the language to use for highlighting syntax.</li>
<li>3rd line (optional) is a regex that isolates the output to a specific portion of the file (capture group 1 is what get isolated).</li>
</ul>
<p>The output will automatically be un-indented.</p>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>Be aware that the isolation regex (line 3) does not use a DOT_ALL flag. That is, the <code>.</code> meta-character doesn't match new lines. If you want to match new lines, use something like <code>[\s\S]</code> instance.</p>
</div>
<a name="H_CSV%20Table"></a><h1>CSV Table</h1>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p><strong>TODO</strong>: Make this into a macro definition rather than having it baked in.</p>
<p>Add a table using the CSV block tag:</p>
<pre><code>```{csv}
!!{ "firstLineHeader": true }
Code,Country
AFG,Afghanistan
ALB,Albania
ALG,Algeria
ASA,American Samoa
AND,Andorra
ANG,Angola
AIA,Anguilla
ATG,Antigua and Barbuda
```
</code></pre>
<p>Block output:</p>
<table><tbody><tr><th>Code</th><th>Country</th></tr><tr><td>AFG</td><td>Afghanistan</td></tr><tr><td>ALB</td><td>Albania</td></tr><tr><td>ALG</td><td>Algeria</td></tr><tr><td>ASA</td><td>American Samoa</td></tr><tr><td>AND</td><td>Andorra</td></tr><tr><td>ANG</td><td>Angola</td></tr><tr><td>AIA</td><td>Anguilla</td></tr><tr><td>ATG</td><td>Antigua and Barbuda</td></tr></tbody></table><a name="H_Macro"></a><h1>Macro</h1>
<p>You can define custom inline and block tags specific to your markdown environment (macros). When invoked, a custom tag pulls down a user-defined container (pulled from Dockerhub) and launches a custom script on it to process inputs from your markdown environment. The output of the container gets rendered as normal markdown as if it were normal markdown.</p>
<p>A custom tag is defined by placing a special directory in the same directory as your input.md file. The name of the directory must end with either...</p>
<ul>
<li><code>macro_block_</code> -- custom tag will be exposed as a block tag</li>
<li><code>macro_inline_</code> -- custom tag will be exposed as an inline tag</li>
<li><code>macro_all_</code> -- custom tag will be exposed as either a block or inline tag</li>
</ul>
<p>...followed by the name of the custom tag. So for example, a directory name <code>mycustomtag_macro_block</code> will get invoked whenever you use a block tag named <code>mycustomtag</code> in your input.md file.</p>
<p>The structure of this special directory must be as follows:</p>
<ul>
<li><code>[MACRO_DIR]/container</code>: a directory containing container setup files.</li>
<li><code>[MACRO_DIR]/container/Dockerfile</code>: a Dockerfile that sets up the container.</li>
<li><code>[MACRO_DIR]/container/*</code>: files/resources required by the <code>Dockerfile</code>.</li>
<li><code>[MACRO_DIR]/input</code>: a directory containing input files.</li>
<li><code>[MACRO_DIR]/input/run.sh</code>: a script that gets run when the container starts.</li>
<li><code>[MACRO_DIR]/input/*</code>: files/resources required by <code>run.sh</code> and/or whatever it invokes.</li>
<li><code>[MACRO_DIR]/settings.json</code>: a special settings file (described further below).</li>
</ul>
<p>The <code>settings.json</code> file can be used to pass in extra (shared) inputs to the container when it runs. For example, multiple tags may require the same shared piece of code. Rather than placing a copy of that code in each tag's <code>input/</code> directory, you can place a single copy in the root of your markdown environment and have each tag reference it:</p>
<pre class="hljs"><code>{
    <span class="hljs-attr">"copyInputs"</span>: [ <span class="hljs-string">"shared_dir1"</span>, <span class="hljs-string">"shared_dir2"</span> ], <span class="hljs-comment">// Dirs in the root markdown environment that'll</span>
                                                    <span class="hljs-comment">// be made available in the container's /input/</span>
                                                    <span class="hljs-comment">// directory when it runs. </span>
    <span class="hljs-attr">"injectScriptInputs"</span>: {                 <span class="hljs-comment">// CSS and JS files that are expected to be generated in</span>
        <span class="hljs-attr">"scriptinject_sample1.css"</span>: <span class="hljs-string">"css"</span>,  <span class="hljs-comment">// in the container's /output/ directory that'll be made</span>
        <span class="hljs-attr">"scriptinject_sample2.css"</span>: <span class="hljs-string">"css"</span>,  <span class="hljs-comment">// available and injected into the rendered HTML.</span>
        <span class="hljs-attr">"scriptinject_sample1.js"</span>: <span class="hljs-string">"js"</span>
    }
}
</code></pre>
<p>Essentially, the <code>container</code> sub-directory contains the files required to setup the container and the <code>input</code> sub-directory contains the files to expose to the container. When the tag gets used, the launcher ...</p>
<ul>
<li>copies <code>[MACRO_ENV_PATH]/input</code> to <code>/input</code> on the container.</li>
<li>copies <code>[MACRO_DIR]/settings.json</code> shared resources to <code>/input</code> on the container.</li>
<li>stores tag data to <code>/input/input.data</code> on the container.</li>
<li>launches <code>/input/run.sh</code> on the container.</li>
<li>expects output markdown and any files required by it in <code>/output/output.md</code> on the container.</li>
</ul>
<p>Any other files generated inside the container's <code>/output</code> are assumed to be resources referenced by <code>/output/output.md</code> and as such will get copied over to the root markdown input directory. It's highly recommended that you place these resources in <code>/output/[RANDOM_OR_HASH_DIR]</code> instead of <code>/output</code>. Resources placed directly in <code>/output</code> may encounter name collisions when rendering.</p>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>You can streamline the generation of <code>/output/[RANDOM_DIR]</code> via the shell -- for example:</p>
<pre class="hljs"><code>rand=$(head /dev/urandom | tr -dc A-Za-z0-9 | head -c 13)
<span class="hljs-comment"># Script should write markdown to /output/output.md</span>
<span class="hljs-comment"># Script should write markdown resources to /output/$rand/ but reference them</span>
<span class="hljs-comment">#   in markdown as $rand/ (e.g. output to /output/$rand/out.png but reference</span>
<span class="hljs-comment">#   in output.md as $rand/out.png).</span>
mkdir /output/<span class="hljs-variable">$rand</span>
npm start -- <span class="hljs-variable">$rand</span>
</code></pre>
</div>
<p>This sample file comes with a couple of simple macro examples that you can use as a reference. Each macro takes a piece of text and manipulates it to contain some extra markdown:</p>
<pre><code>Output:

```{testmacroblock}
hello block
```

Some text before. `{testmacroinline} hello inline` Some text after.
</code></pre>
<p>Output:</p>
<p>This is an BLOCK macro that outputs Markdown text with a link: <a href="http://www.google.com">hello block
</a>!</p>
<p>Some text before. <code>{testmacroinline} hello inline</code> Some text after.</p>
<a name="H_Macro%20Example%3A%20Note"></a><h2>Macro Example: Note</h2>
<p>Input:</p>
<pre><code>```{note}
This is a custom note.

![Image Example](https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Generic_Camera_Icon.svg/200px-Generic_Camera_Icon.svg.png)
```
</code></pre>
<p>Output:</p>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>This is a custom note.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Generic_Camera_Icon.svg/200px-Generic_Camera_Icon.svg.png" alt="Image Example"></p>
</div>
<a name="H_Macro%20Example%3A%20GraphViz"></a><h2>Macro Example: GraphViz</h2>
<p>Input:</p>
<pre><code>```{dot}
digraph {
  a -&gt; b;
  b -&gt; c;
  b -&gt; d;
}
```
</code></pre>
<p>Output:</p>
<p><img src="dot_59d63763e988a01556f092eca0b19207.svg" alt="Dot diagram"></p>
<a name="H_Macro%20Example%3A%20PlantUML"></a><h2>Macro Example: PlantUML</h2>
<p>Input:</p>
<pre><code>```{plantuml}
@startuml
class Student {
  Name
}
Student "0..*" - "1..*" Course
(Student, Course) .. Enrollment

class Enrollment {
  drop()
  cancel()
}
@enduml
```
</code></pre>
<p>Output:</p>
<p><img src="puml_2e593481102b7152ad361c0ae50622e8.svg" alt="PlantUML diagram"></p>
<a name="H_Macro%20Example%3A%20Svgbob"></a><h2>Macro Example: Svgbob</h2>
<p>Input:</p>
<pre><code>```{svgbob}
    .----.        .----.
   /      \      /      \            .-----+-----+-----.
  +        +----+        +----.      |     |     |     |          .-----+-----+-----+-----+
   \      /      \      /      \     |     |     |     |         /     /     /     /     /
    +----+        +----+        +    +-----+-----+-----+        +-----+-----+-----+-----+
   /      \      /      \      /     |     |     |     |       /     /     /     /     /
  +        +----+        +----+      |     |     |     |      +-----+-----+-----+-----+
   \      /      \      /      \     +-----+-----+-----+     /     /     /     /     /
    '----+        +----+        +    |     |     |     |    +-----+-----+-----+-----+
          \      /      \      /     |     |     |     |   /     /     /     /     /
           '----'        '----'      '-----+-----+-----'  '-----+-----+-----+-----+





       ___     ___      .---+---+---+---+---.     .---+---+---+---.  .---.   .---.
   ___/   \___/   \     |   |   |   |   |   |    / \ / \ / \ / \ /   |   +---+   |
  /   \___/   \___/     +---+---+---+---+---+   +---+---+---+---+    +---+   +---+
  \___/   \___/   \     |   |   |   |   |   |    \ / \ / \ / \ / \   |   +---+   |
  /   \___/   \___/     +---+---+---+---+---+     +---+---+---+---+  +---+   +---+
  \___/   \___/   \     |   |   |   |   |   |    / \ / \ / \ / \ /   |   +---+   |
      \___/   \___/     '---+---+---+---+---'   '---+---+---+---'    '---'   '---'

```
</code></pre>
<p>Output:</p>
<p><img src="svgbob_2abe3d0062e88646df38279d10271f117d9c3ae6.svg" alt="Kroki diagram output"></p>
<a name="H_Macro%20Example%3A%20LaTeX%20Chemfig"></a><h2>Macro Example: LaTeX Chemfig</h2>
<p>Input:</p>
<pre><code>```{chemfig}
\chemfig{Cl-[6]Co(&lt;:[3]H_2O)(&lt;[5]H_2O)(&lt;[7]H_2O)(&lt;:[9]H_2O)-[6]Cl}
```
</code></pre>
<p>Output:</p>
<p><img src="chemfig_22454110f0d60b9cc0cbf57e5f88ff9a.svg" alt="Chemfig diagram"></p>
<p>All preamble and postamble text for the LaTeX document is automatically added by this extension -- only the chemfig LaTeX package is loaded.  For details on chemfig syntax, see <a href="https://en.wikibooks.org/w/index.php?title=LaTeX/Chemical_Graphics&amp;oldid=3452092">here</a>.</p>
<a name="H_Macro%20Example%3A%20Script%20Injection%20(CSS%2FJS)"></a><h2>Macro Example: Script Injection (CSS/JS)</h2>
<p>Input:</p>
<pre><code>```{scriptinject}
test
```
</code></pre>
<p>Output:</p>
<p>SCRIPT OUTPUT: <span class="SCRIPTINJECT_CLASS">test</span></p>
<a name="H_Standard%20Markdown"></a><h1>Standard Markdown</h1>
<p>Standard Markdown syntax guide (adapted from https://github.com/tchapi/markdown-cheatsheet).</p>
<a name="H_Headers"></a><h2>Headers</h2>
<pre><code># Heading 1
## Heading 2
### Heading 3
#### Heading 4
##### Heading 5
###### Heading 6
</code></pre>
<div style="margin:2em; background-color: #e0e0e0;">
<p><strong>⚠️NOTE️️️⚠️</strong></p>
<p>Outputs left out so as to not pollute the table of contents.</p>
</div>
<a name="H_Text%20Formatting"></a><h2>Text Formatting</h2>
<p>Emphasized text:</p>
<p><em>text</em> --&gt; <code>_text_</code> or <code>*text*</code></p>
<p>Strong text:</p>
<p><strong>text</strong> --&gt;  <code>__text__</code> or <code>**text**</code></p>
<p>Strong emphasized text:</p>
<p><em><strong>text</strong></em> --&gt; <code>___text___</code> or <code>***text***</code></p>
<p>Link:</p>
<p><a href="http://www.google.com">text</a> --&gt; <code>[text](http://www.google.com")</code></p>
<p>Block quote:</p>
<blockquote>
<p>Blockquote</p>
<blockquote>
<p>Nested blockquote</p>
</blockquote>
</blockquote>
<pre><code>&gt; Blockquote
&gt;&gt; Nested blockquote
</code></pre>
<p>Horizontal line:</p>
<hr>
<pre><code>- - - -
</code></pre>
<a name="H_Image"></a><h2>Image</h2>
<p>Image:</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/MRNA_structure.svg" alt="Messenger RNA structure"></p>
<pre><code>![Messenger RNA structure](https://upload.wikimedia.org/wikipedia/commons/b/ba/MRNA_structure.svg)
</code></pre>
<a name="H_Lists"></a><h2>Lists</h2>
<p>Unordered list:</p>
<ul>
<li>Some item
<ul>
<li>Some inner item
<ul>
<li>Some inner inner item</li>
</ul>
</li>
</ul>
</li>
<li>Some other item</li>
</ul>
<pre><code>* Some item 
    * Some inner item
        * Some inner inner item
* Some other item
</code></pre>
<p>Ordered list:</p>
<ol>
<li>Some item
<ol>
<li>Some inner item
<ol>
<li>Some inner inner item</li>
<li>Some inner inner item</li>
</ol>
</li>
</ol>
</li>
<li>Some other item</li>
</ol>
<pre><code>1. Some item 
    1. Some inner item
        1. Some inner inner item
        1. Some inner inner item
1. Some other item
</code></pre>
<a name="H_Table"></a><h2>Table</h2>
<p>No flavour of markdown tables are supported. You can use CSV tables instead.</p>
<a name="H_Code"></a><h2>Code</h2>
<p>Code can either be inline in a paragraph or as a standalone block. Only standalone blocks can have syntax highlighting.</p>
<p>Inline code block example:</p>
<p><code>inlineCode(arg1, arg2)</code> --&gt; <code>`inlineCode(arg1, arg2)`</code></p>
<p>Block code block example:</p>
<pre class="hljs"><code><span class="hljs-keyword">import</span> java.io.*;
<span class="hljs-keyword">import</span> java.nio.charset.*;
<span class="hljs-keyword">import</span> java.nio.file.*;
<span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>{
    Files.write(Paths.get(<span class="hljs-string">"/output/text.txt"</span>), <span class="hljs-string">"hello world"</span>.getBytes(StandardCharsets.UTF_8), StandardOpenOption.CREATE);
  }
}
</code></pre>
<pre><code>```java
import java.io.*;
import java.nio.charset.*;
import java.nio.file.*;
import java.util.*;

public class Main {
  public static void main(String[] args) throws Throwable {
    Files.write(Paths.get("/output/text.txt"), "hello world".getBytes(StandardCharsets.UTF_8), StandardOpenOption.CREATE);
  }
}
```
</code></pre>

        </body></html>